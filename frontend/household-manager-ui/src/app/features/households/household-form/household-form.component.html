<div class="container household-form-container">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-3">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/households" class="text-decoration-none">
              <i class="fas fa-home me-1"></i>My Households
            </a>
          </li>
          @if (isEditMode && householdName) {
          <li class="breadcrumb-item">
            <a [routerLink]="['/households', householdId]" class="text-decoration-none">
              {{ householdName }}
            </a>
          </li>
          }
          <li class="breadcrumb-item active" aria-current="page">
            {{ isEditMode ? 'Edit' : 'Create' }}
          </li>
        </ol>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <div class="row justify-content-center mb-4">
    <div class="col-lg-8 col-xl-6">
      <div class="text-center">
        <h1 class="h3 mb-1">
          <i class="fas fa-home text-primary me-2"></i>
          {{ pageTitle }}
        </h1>
        <p class="text-muted mb-0">
          @if (isEditMode) {
            Update household information
          } @else {
            Create a new household to get started
          }
        </p>
      </div>
    </div>
  </div>

  <!-- Form -->
  <div class="row justify-content-center">
    <div class="col-lg-8 col-xl-6">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <!-- Name Field -->
            <div class="mb-3">
              <label for="name" class="form-label">
                Name <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                id="name"
                formControlName="name"
                class="form-control"
                [class.is-invalid]="name?.invalid && name?.touched"
                placeholder="My Family House"
                maxlength="100">
              
              @if (name?.invalid && name?.touched) {
                <div class="invalid-feedback">
                  @if (name?.errors?.['required']) {
                    Name is required
                  }
                  @if (name?.errors?.['maxlength']) {
                    Name cannot exceed 100 characters
                  }
                </div>
              }
            </div>

            <!-- Description Field -->
            <div class="mb-4">
              <label for="description" class="form-label">Description</label>
              <textarea
                id="description"
                formControlName="description"
                class="form-control"
                [class.is-invalid]="description?.invalid && description?.touched"
                rows="3"
                placeholder="Optional description..."
                maxlength="500"></textarea>
              
              @if (description?.invalid && description?.touched) {
                <div class="invalid-feedback">
                  @if (description?.errors?.['maxlength']) {
                    Description cannot exceed 500 characters
                  }
                </div>
              }
              
              <div class="form-text">
                {{ description?.value?.length || 0 }} / 500 characters
              </div>
            </div>

          </form>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="card shadow-sm mt-3">
        <div class="card-body p-4">
          <div class="row g-3">
            <div class="col-sm-6">
              <button type="button" (click)="onCancel()" class="btn btn-outline-secondary w-100">
                <i class="fas fa-times me-2"></i>Cancel
              </button>
            </div>
            <div class="col-sm-6">
              <button
                type="submit"
                class="btn w-100 {{ submitButtonClass }}"
                [disabled]="isSubmitting || form.invalid"
                (click)="onSubmit()">
                @if (isSubmitting) {
                  <span class="spinner-border spinner-border-sm me-2"></span>
                }
                <i class="fas fa-{{ isEditMode ? 'save' : 'plus' }} me-2"></i>
                {{ submitButtonText }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>